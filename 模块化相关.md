# ESModule
    1.  通过export default xxx 导出默认值，使用 import xxx form './xxx.js' 导入
    2.  通过export xxx 导出单个值，使用 import { xxx } form './xxx.js' 导入
    3.  1 和 2 可以结合，可以使用 * as xxx 的写法导入全部值
    4.  ESModule 是静态编译，导入语句只能写在文件最顶端
    5.  ESModule 是导出引用
    6.  可以通过 import() 方法动态导入， 返回一个 promise 对象
    7.  this 指向 undefined
    8.  浏览器中通过 <script type="module" src="/src/main.ts"></script> 支持原生esm
    9.  代码是在模块作用域之中运行，而不是在全局作用域运行。模块内部的顶层变量，外部不可见。
    10. 模块脚本自动采用严格模式，不管有没有声明use strict
    11. 同一个模块如果加载多次，将只执行一次。
## ESModule 的静态编译过程包括以下几个步骤：

    1. 词法分析：ESModule 静态编译器首先会对代码进行词法分析，将代码分解成一个个 token。
    2. 语法分析：接下来，静态编译器会对 token 进行语法分析，构建出抽象语法树（AST）。
    3. 解析依赖：静态编译器会在 AST 中查找 import 和 export 语句，从而确定模块之间的依赖关系。
    4. 解析别名：如果在 import 语句中使用了别名，静态编译器会解析这些别名，并将其替换为真实的模块路径。
    5. 静态优化：在解析完依赖关系后，静态编译器会对模块进行静态优化，包括：
      (1). 优化变量访问：静态编译器会通过静态分析代码，找出模块中未使用的变量，并将其删除，从而减小模块的体积。
      (2). 提取公共代码：如果多个模块之间存在相同的代码片段，静态编译器会将其提取出来，形成一个新的模块，并将原来的模块引用这个新模块。
    6. 生成代码：最后，静态编译器会将优化后的代码转换为可执行的 JavaScript 代码，并将其保存到文件中，以备后续执行时加载。


# CommonJS
    1. 通过 module.exports 导出的是我们赋值的数据，可以是对象，也可以是基本数据
    2. 通过 exports.key = value 导出，导出的是 exports 这个对象
    3. 1 和 2 同时存在时，以 module.exports 导出的为准
    4. CommonJS 是运行时加载，只有在代码运行时才能确定模块的依赖关系
    5. CommonJS 是导出拷贝
    6. 只能导出一个值
    7. 支持动态语法导入
    8. this指向当前模块
    9. 模块可以被重复引用、加载。第一次加载时会被缓存，之后再引用就直接读取缓存


# 两者区别
  - CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。
  - CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。
  - CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立的模块依赖的解析阶段。
  - ES6 Module 的 import 是静态引入，CommonJS的 require 是动态引入
  - Tree-Shaking 就是通过 ES6 Module 的 import 来进行静态分析，并且只支持 ES6 Module 模块的使用。Tree-Shaking 就是移除掉 JS 上下文中没有引用的代码，比如 import 导入模块没有返回值的情况下，webpack 在打包编译时 Tree-Shaking 会默认忽略掉此文件
  - ES6 Module 是对模块的引用，输出的是值的引用，改变原来模块中的值引用的值也会改变;CommonJS 是对模块的拷贝，修改原来模块的值不会影响引用的值
  - ES6 Module 里的 this 指向 undefined；CommonJS 里的 this 指向模块本身
  - ES6 Module 是在编译时确定依赖关系，生成接口并对外输出；CommonJS 是在运行时加载模块
  - ES6 Module 可以单独加载某个方法；CommonJS 是加载整个模块
  - ES6 Module 不能被重新赋值，会报错；CommonJS 可以重新赋值(改变 this 指向)
