### 浏览器加载一个页面的过程
1. URL解析：从URL中抽取出域名字段
2. DNS域名解析：
    - 查找浏览器缓存：浏览器会缓存2-30分钟访问过网站的DNS信息，如未找到
    - 检查系统缓存：检查hosts文件，它保存了一些访问过网站的域名和IP的数据，如未找到
    - 检查路由器缓存：路由器有自己的DNS缓存，如未找到
    - 检查ISP DNS缓存：ISP服务商DNS缓存（本地服务器缓存），如未找到
    - 递归查询：从根域名服务器到顶级域名服务器再到极限域名服务器依次搜索对应目标域名的IP
3. TCP连接：建立TCP连接，三次握手
4. 请求和传输数据：服务器解析客户端请求，并返回相应的数据
5. 浏览器渲染页面：这里先空着，我们下面讲浏览器原理时展开
6. 关闭TCP连接：当数据完成请求到返回的过程之后，根据Connection的Keep-Alive属性可以选择是否断开TCP连接，四次挥手释放。

### 浏览器渲染页面的过程
1. 解析HTML，构建DOM树
    - 标记化：将输入的内容解析成多个标记（HTML标记包括起始标记，结束标记，属性名称，属性值）。标记生成器识别标记，传递给树构造器，然后接受下一个字符以识别下一个标记；如此反复直至结束。标记化算法是通过状态机实现的。
    - DOM构建：标记生成器发送的每个节点都由树构建器进行处理，规范中定义了每个标记所对应的DOM元素，这些元素会在接收到对应的标记时构建，这些元素不仅会被添加到DOM树，还会添加到开放元素的堆栈中。此堆栈用于纠正嵌套错误和处理未关闭的标记，其算法也可以用状态机来表示。
2. 解析CSS，构建CSSOM树
3. 将DOM树和CSSOM树合并成一个渲染树
4. 根据渲染树来布局，计算每个节点的几何信息
5. 将各个节点绘制到屏幕上

![Alt text](https://s2.51cto.com/images/blog/202203/07143729_6225a82998bdf80632.png?x-oss-process%3Dimage%2Fwatermark%2Csize_16%2Ctext_QDUxQ1RP5Y2a5a6i%2Ccolor_FFFFFF%2Ct_30%2Cg_se%2Cx_10%2Cy_10%2Cshadow_20%2Ctype_ZmFuZ3poZW5naGVpdGk%3D%2Fformat%2Cwebp%2Fresize%2Cm_fixed%2Cw_1184)


### 浏览器的原理
#### 在Chrome中，主要的进程有4个：

1. 浏览器进程 (Browser Process)：负责浏览器的TAB的前进、后退、地址栏、书签栏的工作和处理浏览器的一些不可见的底层操作，比如网络请求和文件访问。
2. 渲染进程 (Renderer Process)：负责一个Tab内的显示相关的工作，也称渲染引擎。
3. 插件进程 (Plugin Process)：负责控制网页使用到的插件
4. GPU进程 (GPU Process)：负责处理整个应用程序的GPU任务

#### 四个进程的关系：
首先，当我们是要浏览一个网页，我们会在浏览器的地址栏里输入URL，这个时候Browser Process会向这个URL发送请求，获取这个URL的HTML内容，然后将HTML交给Renderer Process，Renderer Process解析HTML内容，解析遇到需要请求网络的资源又返回来交给Browser Process进行加载，同时通知Browser Process，需要Plugin Process加载插件资源，执行插件代码。解析完成后，Renderer Process计算得到图像帧，并将这些图像帧交给GPU Process，GPU Process将其转化为图像显示屏幕。

![Alt text](https://segmentfault.com/img/remote/1460000022633992/view)
